{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "networkFabricName": {
      "value": "networkFabricName"
    },
    "annotation": {
      "value": "annotation"
    },
    "networkFabricControllerId": {
      "value": "/subscriptions/xxxxx-xxxx-xxxx-xxxx-xxxxx/resourceGroups/example-rg/providers/Microsoft.ManagedNetworkFabric/networkFabricControllers/example-NFC"
    },
    "networkFabricSku": {
      "value": "fab1"
    },
    "rackCount": {
      "value": 3
    },
    "serverCountPerRack": {
      "value": 7
    },
    "ipv4Prefix": {
      "value": "10.18.0.0/19"
    },
    "ipv6Prefix": {
      "value": ""
    },
    "fabricASN": {
      "value": 29249
    },
    "terminalServerConfiguration": {
      "value": {
        "username": "username",
        "password": "password",
        "serialNumber": "12345",
        "primaryIpv4Prefix": "172.31.0.0/30",
        "primaryIpv6Prefix": "",
        "secondaryIpv4Prefix": "172.31.0.4/30",
        "secondaryIpv6Prefix": ""
      }
    },
    "managementNetworkConfiguration": {
      "value": {
        "infrastructureVpnConfiguration": {
          "peeringOption": "OptionB",
          "networkToNetworkInterconnectId": "/subscriptions/xxxxx-xxxx-xxxx-xxxx-xxxxx/resourceGroups/example-rg/providers/Microsoft.ManagedNetworkFabric/networkFabrics/example-fabric/networkToNetworkInterconnects/example-nni",
          "optionBProperties": {
            "routeTargets": {
              "importIpv4RouteTargets": [
                "65046:10039"
              ],
              "importIpv6RouteTargets": [
                "65046:10039"
              ],
              "exportIpv4RouteTargets": [
                "65046:10039"
              ],
              "exportIpv6RouteTargets": [
                "65046:10039"
              ]
            }
          },
          "optionAProperties": {
            "mtu": 1500,
            "vlanId": 520,
            "peerASN": 65133,
            "bfdConfiguration": {
              "intervalInMilliSeconds": 300,
              "multiplier": 10
            },
            "primaryIpv4Prefix": "172.31.0.0/31",
            "primaryIpv6Prefix": "3FFE:FFFF:0:CD30::a0/127",
            "secondaryIpv4Prefix": "172.31.0.20/31",
            "secondaryIpv6Prefix": "3FFE:FFFF:0:CD30::a0/127"
          }
        },
        "workloadVpnConfiguration": {
          "peeringOption": "OptionB",
          "networkToNetworkInterconnectId": "/subscriptions/xxxxx-xxxx-xxxx-xxxx-xxxxx/resourceGroups/example-rg/providers/Microsoft.ManagedNetworkFabric/networkFabrics/example-fabric/networkToNetworkInterconnects/example-nni",
          "optionBProperties": {
            "routeTargets": {
              "importIpv4RouteTargets": [
                "65046:10039"
              ],
              "importIpv6RouteTargets": [
                "65046:10039"
              ],
              "exportIpv4RouteTargets": [
                "65046:10039"
              ],
              "exportIpv6RouteTargets": [
                "65046:10039"
              ]
            }
          },
          "optionAProperties": {
            "mtu": 1500,
            "vlanId": 520,
            "peerASN": 65133,
            "bfdConfiguration": {
              "intervalInMilliSeconds": 300,
              "multiplier": 10
            },
            "primaryIpv4Prefix": "172.31.0.0/31",
            "primaryIpv6Prefix": "3FFE:FFFF:0:CD30::a0/127",
            "secondaryIpv4Prefix": "172.31.0.20/31",
            "secondaryIpv6Prefix": "3FFE:FFFF:0:CD30::a0/127"
          }
        }
      }
    }
  }
}