{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "omsLogAnalyticsWorkspaceName": {
            "type": "string",
            "defaultValue": "",
            "metadata": {
                "description": "Create new or use an existing Log Analytic Workspace"
            }
        },
        "omsLogAnalyticsRegion": {
            "type": "string",
            "allowedValues": [
                "westeurope",
                "eastus",
                "southeastasia",
                "australiasoutheast",
                "wescentralus"
            ],
            "metadata": {
                "description": "Specify the Azure Region for your new or existing OMS workspace"
            }
        },
        "omsLogAnalyticsSku": {
            "type": "string",
            "defaultValue": "free",
            "allowedValues": [
                "free",
                "standalone",
                "pernode"
            ],
            "metadata": {
                "description": "Specify the SKU for Log Analytics"
            }
        },
        "omsDataIngestionFrequency": {
            "type": "string",
            "defaultValue": "Hourly",
            "allowedValues": [
                "Hourly",
                "Daily"
            ],
            "metadata": {
                "description": "Specify the Azure Usage data retrieval frequency"
            }
        },
        "currency": {
            "type": "string",
            "defaultValue": "USD",
            "allowedValues": [
                "ARS",
                "AUD",
                "BRL",
                "CAD",
                "CHF",
                "DKK",
                "EUR",
                "GBP",
                "HKD",
                "IDR",
                "INR",
                "JPY",
                "KRW",
                "MXN",
                "MYR",
                "NOK",
                "NZD",
                "RUB",
                "SAR",
                "SEK",
                "TRY",
                "TWD",
                "USD",
                "ZAR"
            ],
            "metadata": {
                "description": "Specify the Azure Billing Currency"
            }
        },
        "_artifactsLocation": {
            "type": "string",
            "defaultValue": "https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/oms-azure-resource-usage-solution",
            "metadata": {
                "description": "The base URI where artifacts required by this template are located"
            }
        },
        "_artifactsLocationSasToken": {
            "type": "securestring",
            "defaultValue": "",
            "metadata": {
                "description": "The sasToken required to access _artifactsLocation.  When the template is deployed using the accompanying scripts, a sasToken will be automatically generated."
            }
        }
    },
    "variables": {
        "omsSolutions": {
            "customSolution": {
                "name": "Azure Usage",
                "solutionName": "[concat('AzureUsage', '[', parameters('omsLogAnalyticsWorkspaceName'), ']')]",
                "publisher": "volkanc@microsoft.com",
                "displayName": "Azure Usage",
                "description": "Monitor Azure Usage",
                "author": "volkanc@microsoft.com"
            }
        },
        "opsInsightWorkspaceID": "AzureUsage-OPSINSIGHTS_WS_ID",
        "opsInsightWorkspaceIDType": "string",
        "opsInsightWorkspaceIDDescription": "Value of the user's omsWorkspaceId",
        "opsInsightWorkspaceKey": "AzureUsage-OPSINSIGHTS_WS_KEY",
        "opsInsightWorkspaceKeyType": "string",
        "opsInsightWorkspaceKeyDescription": "Encrypted value of the user's omsWorkspaceKey",
        "createScheduleAutomationAccountName": "AzureUsage-AzureAutomationAccount-MS-Mgmt",
        "createScheduleAutomationAccountType": "string",
        "createScheduleAutomationAccountDescription": "The name of the Automation Account",
        "createScheduleResourceGroupName": "AzureUsage-AzureAutomationResourceGroup-MS-Mgmt",
        "createScheduleResourceGroupType": "string",
        "createScheduleResourceGroupDescription": "The name of the resource group"
    },
    "resources": [
        {
            "name": "[parameters('omsLogAnalyticsWorkspaceName')]",
            "type": "Microsoft.OperationalInsights/workspaces",
            "apiVersion": "2015-11-01-preview",
            "location": "[parameters('omsLogAnalyticsRegion')]",
            "properties": {
                "sku": {
                    "name": "[parameters('omsLogAnalyticsSku')]"
                }
            },
            "resources": [
                {
                    "apiVersion": "2015-11-01-preview",
                    "name": "[variables('omsSolutions').customSolution.name]",
                    "type": "views",
                    "dependsOn": [
                        "[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]"
                    ],
                    "properties": {
                        "Name": "[variables('omsSolutions').customSolution.name]",
                        "DisplayName": "[variables('omsSolutions').customSolution.displayName]",
                        "Description": "[variables('omsSolutions').customSolution.description]",
                        "Author": "[variables('omsSolutions').customSolution.author]",
                        "Source": "Local",
                        "Dashboard": [
                            {
                                "Id": "InformationBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "Title": "",
                                        "NewGroup": false,
                                        "Color": "#0072c6"
                                    },
                                    "Header": {
                                        "Image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAztJREFUeNrUmktoE1EUhqexKj4zJWoaqIpVaVGxKr6ogsaNbhS0YKkKFeKmriwFEaXYnY+FYjeCbmtRRBeuXIlLMe1CXGlduBOt0rS1FaF2/A+ciWMy0yT3njvN/PBtMuHc8899zJ1zp8ZxHEtAKXAE7AdNYBOwGVKO+QQ+gDfgFfii23CNhoHV4CyzWzHGEBgEA2BUKQIZqJAG0A+mHTn9AvfB2krzqeTPi8AVMOWYE92UPrBY2kAzeOeEp/fcZsncYmWMsjaQBdut8LSN22zTnQMXwYwzf5rhHJSGUJdTPeoKyjNoGT0JnoIFCt1/GXwOuNYIbirE/APawbNyhlATmNS4W4fm6NW0Rlxa/baWmsQLwROwXGMC2orXSmkpeMw55lVooAe0aK4gcUMG3NWpJ8hAA+gVWAJtRXPlqpdzLTJwlbvJpAFbID7leK3QwCpwXughFDdsgNTJOecN0A9LhIKbHkIW59rpNdAhuA2wQ+gB0hnXQBLsiqCBnaCeDKTpxUYwcDwkA5TzYTLQKryTDGMOuDoQ44eDFcEhRNpCBtYJB42HaGC9O4klVRuwl1opPNdIa2KaG7dK7nSdgXZWxCwzskOYwPmtxISBuPEQxj9pnAx8NRC4LiQDo2RgJMI98DHGtUpppbgXvNSbMEAv9af5NTKKaicDtK/+ZmCNNi0qpyRpCH3nKnHUNOROYtIj4eDTXP9JMzfAlHAbg966UEKwXE71m70+NSH67bdgFTvhrQv9AA+E7sw98Nbnd/rtjlAbDznn/ypzKc2KnKuDc1TmWgXiT3KuRZU5Oq+6LrQ6BGlWIH6f5TlbK9zM9YNhzQaOKV4rR8M8RD23q7ibG0FOo4snwA6fuC18TVWU08Zyy+snwHNLrbxu8ZJ5F7zkIXUUdNP+XTEelddPgRfFAzZ4wmXAbBUcblAOF1QP+TJVcMSU0T2lPA7G5iH5HLctcsy6AWRDTD7LbYoedNeCS2DcYOK0SnVzW+In9S5JcEtzSfRL/DbHrigfnY896C2LPvQ4B/b4PBRLiZ7KdJg9wLvhMaUCqdDnNgkqtIJ9oBlspqITWMYvSj/5pWnE+ve5zev8hkxDfwUYAP0NkvYTPlJVAAAAAElFTkSuQmCC",
                                        "Label": "Azure Offer Types",
                                        "Link": {
                                            "Label": "More info",
                                            "Url": "https://azure.microsoft.com/en-us/support/legal/offer-details/"
                                        }
                                    },
                                    "List": [
                                        {
                                            "Title": "Here Are the Common Azure Offers",
                                            "Content": "[concat('Pay-As-You-Go **0003P**   \nAzure Dynamics **0033P**   \nFree Trial **0044P**  \nVisual Studio Professional  **0059P**  \nVisual Studio Test Professional **0060P**  \nMSDN Platforms **0062P**  \nVisual Studio Enterprise **80063P**\nPay-As-You-Go Dev/Test **0023P** \nEnterprise Dev/Test **0148P** \n\n__Use : __\n\nType=AzureUsage_CL   | Top 1  |select OfferDurableId_s\nto get the Azure Offer\n\n__Check More info on top for latest Azure Offer codes__\nSolition utilizes RateCard Api for the usage rates. Check : https://github.com/Azure/azure-content-nlnl/blob/master/articles/billing-countries-and-currencies.md to see supported currencies')]"
                                        }
                                    ]
                                }
                            },
                            {
                                "Id": "SingleQueryDonutBuilderBladeV1",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "USAGE SUMMARY",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "Spent  by Subscription",
                                        "Subtitle": ""
                                    },
                                    "Donut": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  | measure sum(Cost_d) by  AzureSubscription_s",
                                        "CenterLegend": {
                                            "Text": "Total",
                                            "Operation": "Sum",
                                            "ArcsToSelect": []
                                        },
                                        "Options": {
                                            "colors": [
                                                "#ffb900",
                                                "#009e49",
                                                "#0072c6"
                                            ],
                                            "valueColorMapping": []
                                        }
                                    },
                                    "List": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  | measure sum(Cost_d) by  AzureSubscription_s,meterCategory_s",
                                        "HideGraph": false,
                                        "enableSparklines": false,
                                        "operation": "Summary",
                                        "ColumnsTitle": {
                                            "Name": "Subscription",
                                            "Value": "[concat('Usage-',parameters('Currency'))]"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "{selected item}"
                                    }
                                }
                            },
                            {
                                "Id": "SingleQueryDonutBuilderBladeV1",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "SPEND  by Service",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "Spending  - All Subscriptions",
                                        "Subtitle": "Based on Hourly  Usage and  Azure Offer Selected"
                                    },
                                    "Donut": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  | measure sum(Cost_d) by meterCategory_s ",
                                        "CenterLegend": {
                                            "Text": "[parameters('Currency')]",
                                            "Operation": "Sum",
                                            "ArcsToSelect": []
                                        },
                                        "Options": {
                                            "colors": [
                                                "#0072c6",
                                                "#009e49",
                                                "#ffb900"
                                            ],
                                            "valueColorMapping": []
                                        }
                                    },
                                    "List": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  | measure sum(Cost_d) by meterCategory_s ",
                                        "HideGraph": false,
                                        "enableSparklines": true,
                                        "operation": "Summary",
                                        "ColumnsTitle": {
                                            "Name": "Service",
                                            "Value": "Cost"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "{selected item}"
                                    }
                                }
                            },
                            {
                                "Id": "LineChartCalloutStackedBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "SPEND  by Subscription",
                                        "newGroup": false
                                    },
                                    "charts": [
                                        {
                                            "Header": {
                                                "Title": "VM Deployment Cost Over Time",
                                                "Subtitle": ""
                                            },
                                            "LineChart": {
                                                "Query": "Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  meterCategory_s=\"Virtual Machines\" |measure sum(Cost_d) as VMcost by AzureSubscription_s interval 1HOUR",
                                                "yAxis": {
                                                    "isLogarithmic": false,
                                                    "units": {
                                                        "baseUnitType": "",
                                                        "baseUnit": "",
                                                        "displayUnit": ""
                                                    },
                                                    "customLabel": "[concat('Cost ',parameters('Currency'))]"
                                                }
                                            }
                                        },
                                        {
                                            "Header": {
                                                "Title": "Storage Consumption Cost Over Time",
                                                "Subtitle": ""
                                            },
                                            "LineChart": {
                                                "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  meterCategory_s=\"Storage\" |measure sum(Cost_d) by AzureSubscription_s interval 1HOUR",
                                                "yAxis": {
                                                    "isLogarithmic": false,
                                                    "units": {
                                                        "baseUnitType": "",
                                                        "baseUnit": "",
                                                        "displayUnit": ""
                                                    },
                                                    "customLabel": "[concat('Cost ',parameters('Currency'))]"
                                                }
                                            }
                                        },
                                        {
                                            "Header": {
                                                "Title": "Data Management  Cost Over Time",
                                                "Subtitle": ""
                                            },
                                            "LineChart": {
                                                "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  meterCategory_s=\"Data Management\" |measure sum(Cost_d) by AzureSubscription_s interval 1HOUR",
                                                "yAxis": {
                                                    "isLogarithmic": false,
                                                    "units": {
                                                        "baseUnitType": "",
                                                        "baseUnit": "",
                                                        "displayUnit": ""
                                                    },
                                                    "customLabel": "[concat('Cost ',parameters('Currency'))]"
                                                }
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "Id": "LineChartCalloutBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "VM CONSUMPTION COST",
                                        "newGroup": true,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "VM Cost Over Time",
                                        "Subtitle": "Based on Hourly  Usage and  Azure Offer Selected"
                                    },
                                    "LineChart": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  meterCategory_s=\"Virtual Machines\" |measure sum(Cost_d) by meterCategory_s interval 1HOUR",
                                        "Callout": {
                                            "Title": "Total",
                                            "Series": "",
                                            "Operation": "Sum"
                                        },
                                        "yAxis": {
                                            "isLogarithmic": false,
                                            "units": {
                                                "baseUnitType": "",
                                                "baseUnit": "",
                                                "displayUnit": ""
                                            },
                                            "customLabel": ""
                                        }
                                    },
                                    "List": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  meterCategory_s=\"Virtual Machines\" | measure sum(Cost_d) by Resource",
                                        "HideGraph": false,
                                        "enableSparklines": false,
                                        "operation": "Summary",
                                        "ColumnsTitle": {
                                            "Name": "Deployment",
                                            "Value": "[concat('Cost ',parameters('Currency'))]"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "{selected item}"
                                    }
                                }
                            },
                            {
                                "Id": "LineChartBuilderBlade",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "Storage Consumption Cost",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "Storage Consumption Cost Over Time",
                                        "Subtitle": "Based on Hourly Usage and  Azure Offer Selected"
                                    },
                                    "LineChart": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  meterCategory_s=\"Storage\" |measure sum(Cost_d) by meterCategory_s Interval 1HOUR",
                                        "yAxis": {
                                            "isLogarithmic": false,
                                            "units": {
                                                "baseUnitType": "",
                                                "baseUnit": "",
                                                "displayUnit": ""
                                            },
                                            "customLabel": ""
                                        }
                                    },
                                    "List": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  meterCategory_s=\"Storage\" |measure sum(Cost_d) by Resource",
                                        "HideGraph": false,
                                        "enableSparklines": false,
                                        "operation": "Summary",
                                        "ColumnsTitle": {
                                            "Name": "Storage Account",
                                            "Value": "[concat('Cost ',parameters('Currency'))]"
                                        },
                                        "Color": "#009e49",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "{selected item}"
                                    }
                                }
                            },
                            {
                                "Id": "SingleQueryDonutBuilderBladeV1",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "COST BY Tag",
                                        "newGroup": true,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "Estimated Cost by Resource Tags",
                                        "Subtitle": "Based on Daily Billing and  Azure Offer Selected"
                                    },
                                    "Donut": {
                                        "Query": "* Type=AzureUsage_CL    | measure sum(TaggedCost_d)  by Tag_s",
                                        "CenterLegend": {
                                            "Text": "[concat('Cost ',parameters('Currency'))]",
                                            "Operation": "Sum",
                                            "ArcsToSelect": [
                                                "Overall"
                                            ]
                                        },
                                        "Options": {
                                            "colors": [
                                                "#0072c6",
                                                "#55d455",
                                                "#ff8c00"
                                            ],
                                            "valueColorMapping": []
                                        }
                                    },
                                    "List": {
                                        "Query": "* Type=AzureUsage_CL    | measure sum(TaggedCost_d)  by Tag_s",
                                        "HideGraph": false,
                                        "enableSparklines": true,
                                        "operation": "Summary",
                                        "ColumnsTitle": {
                                            "Name": "Tag",
                                            "Value": "[concat('Cost in ',parameters('Currency'))]"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "{selected item}"
                                    }
                                }
                            },
                            {
                                "Id": "SingleQueryDonutBuilderBladeV1",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "Cost BY RESOURCEGROUP",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "Estimated Cost By Resource Group",
                                        "Subtitle": "Based on Daily Usage and  Azure Offer Selected"
                                    },
                                    "Donut": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly| measure sum(Cost_d) by ResourceGroup",
                                        "CenterLegend": {
                                            "Text": "Total",
                                            "Operation": "Sum",
                                            "ArcsToSelect": []
                                        },
                                        "Options": {
                                            "colors": [
                                                "#00188f",
                                                "#0072c6",
                                                "#00bcf2"
                                            ],
                                            "valueColorMapping": []
                                        }
                                    },
                                    "List": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly| measure sum(Cost_d) by AzureSubscription_s,ResourceGroup",
                                        "HideGraph": false,
                                        "enableSparklines": false,
                                        "operation": "Summary",
                                        "ColumnsTitle": {
                                            "Name": "ResourceGroup",
                                            "Value": "Count"
                                        },
                                        "Color": "#009e49",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "{selected item}"
                                    }
                                }
                            },
                            {
                                "Id": "SingleQueryDonutBuilderBladeV1",
                                "Type": "Blade",
                                "Version": 0,
                                "Configuration": {
                                    "General": {
                                        "title": "Top Resources ",
                                        "newGroup": false,
                                        "icon": "",
                                        "useIcon": false
                                    },
                                    "Header": {
                                        "Title": "Cost by Resource",
                                        "Subtitle": "All costs ( Network,Storage,Data) Associated with specific resource"
                                    },
                                    "Donut": {
                                        "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly| measure sum(Cost_d) by Resource",
                                        "CenterLegend": {
                                            "Text": "Total",
                                            "Operation": "Sum",
                                            "ArcsToSelect": []
                                        },
                                        "Options": {
                                            "colors": [
                                                "#00188f",
                                                "#0072c6",
                                                "#00bcf2"
                                            ],
                                            "valueColorMapping": []
                                        }
                                    },
                                    "List": {
                                        "Query": " Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly| measure sum(Cost_d) by Resource",
                                        "HideGraph": false,
                                        "enableSparklines": false,
                                        "operation": "Summary",
                                        "ColumnsTitle": {
                                            "Name": "Resource ",
                                            "Value": "Total Cost"
                                        },
                                        "Color": "#0072c6",
                                        "thresholds": {
                                            "isEnabled": false,
                                            "values": [
                                                {
                                                    "name": "Normal",
                                                    "threshold": "Default",
                                                    "color": "#009e49",
                                                    "isDefault": true
                                                },
                                                {
                                                    "name": "Warning",
                                                    "threshold": "60",
                                                    "color": "#fcd116",
                                                    "isDefault": false
                                                },
                                                {
                                                    "name": "Error",
                                                    "threshold": "90",
                                                    "color": "#ba141a",
                                                    "isDefault": false
                                                }
                                            ]
                                        },
                                        "NameDSVSeparator": "",
                                        "NavigationQuery": "{selected item}"
                                    }
                                }
                            }
                        ],
                        "OverviewTile": {
                            "Id": "SingleQueryDonutBuilderTileV1",
                            "Type": "OverviewTile",
                            "Version": 0,
                            "Configuration": {
                                "Donut": {
                                    "Query": "* Type=AzureUsage_CL  CostTag_s=Overall  Aggregation_s=Hourly  | measure sum(Cost_d) by meterCategory_s ",
                                    "CenterLegend": {
                                        "Text": "[concat('Total ',parameters('Currency'))]",
                                        "Operation": "Sum",
                                        "ArcsToSelect": []
                                    },
                                    "Options": {
                                        "colors": [
                                            "#0072c6",
                                            "#009e49",
                                            "#ff8c00"
                                        ],
                                        "valueColorMapping": []
                                    }
                                },
                                "Advanced": {
                                    "DataFlowVerification": {
                                        "Enabled": false,
                                        "Query": "*",
                                        "Message": ""
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        {
            "name": "[variables('omsSolutions').customSolution.solutionName]",
            "type": "Microsoft.OperationsManagement/solutions",
            "apiVersion": "2015-11-01-preview",
            "location": "[parameters('omsLogAnalyticsRegion')]",
            "dependsOn": [
                "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
                "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/views/', variables('omsSolutions').customSolution.name)]"
            ],
            "plan": {
                "name": "[variables('omsSolutions').customSolution.solutionName]",
                "product": "[variables('omsSolutions').customSolution.name]",
                "publisher": "[variables('omsSolutions').customSolution.publisher]",
                "promotionCode": ""
            },
            "properties": {
                "workspaceResourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
                "referencedResources": [],
                "containedResources": [
                    "[resourceId('Microsoft.OperationalInsights/workspaces/views/', parameters('omsLogAnalyticsWorkspaceName'), variables('omsSolutions').customSolution.name)]"
                ]
            }
        }
    ],
    "outputs": {}
}