

{
  "$schema":" https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": 1.0.0.0",
  "parameters":{
    "storageaccountname": {
      "type": "string"
    },
    "storageaccountkey":{
      "type": "securestring"
    }

   },
   "resources":[{
     "name": "hellofiles",
     "type": "Microsoft.ContainerInstance/containerGroups",
     "apiVersion": "2017-08-01-preview",
     "location": "[resourceGroup().location]",
     "properties": {
       "containers": [{
         "name": "hellofile",
	 "properties": {
           "image": "seanmckenna/aci-hellofiles",
	   "resources": {
             "requests": {
	       "cpu": 1,
               "memoryInGb": 1.5
	     }
	   }, 
	    "ports":[{
	      "port": 80
	     }],
	     "volumeMounts": [{
               "name": "myvolume",
	       "mountpath": "/aci/logs/"
	     }]
	   }
       }],
      "osType": "Linux",
      "ipAddress": {
        "type": "Public",
        "ports": [{
	  "protocol": "tcp",
          "port": "80"
        }]
       },
       "volumes": [{
         "name": "myvolume",
	 "azureFile": {
           "shareName": "acishare",
	   "storageAccountName": "[parameters('storageaccountname')]",
	   "storageAccountKey": "[parameters('storageaccountkey')]"
	  }
	}]
      }
    }]
  }


