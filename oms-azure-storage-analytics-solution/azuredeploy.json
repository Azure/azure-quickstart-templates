{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "omsLogAnalyticsWorkspaceName": {
      "type": "string",
      "defaultValue": "",
      "metadata": {
        "description": "Create new or use an existing Log Analytic Workspace"
      }
    },
    "omsLogAnalyticsRegion": {
      "type": "string",
      "defaultValue": "eastus",
      "allowedValues": [
        "westeurope",
        "eastus",
        "southeastasia"
      ],
      "metadata": {
        "description": "Specify the Azure Region for your new or existing OMS workspace"
      }
    },
    "omsLogAnalyticsSku": {
      "type": "string",
      "defaultValue": "free",
      "allowedValues": [
        "free",
        "standalone",
        "pernode"
      ],
      "metadata": {
        "description": "Specify the Azure Region for your OMS Automation Account"
      }
    },
    "omsAutomationAccountName": {
      "type": "string",
      "defaultValue": "",
      "metadata": {
        "description": "Use an existing Automation account or create a new"
      }
    },
    "omsAutomationRegion": {
      "type": "string",
      "defaultValue": "eastus2",
      "allowedValues": [
        "westeurope",
        "southeastasia",
        "eastus2",
        "southcentralus",
        "japaneast"
      ],
      "metadata": {
        "description": "Specify the Azure Region for your OMS Automation Account"
      }
    },
    "_artifactsLocation": {
      "type": "string",
      "defaultValue": "https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/oms-azure-storage-analytics-solution",
      "metadata": {
        "description": "The base URI where artifacts required by this template are located"
      }
    },
    "_artifactsLocationSasToken": {
      "type": "securestring",
      "defaultValue": "",
      "metadata": {
        "description": "The sasToken required to access _artifactsLocation.  When the template is deployed using the accompanying scripts, a sasToken will be automatically generated."
      }
    },
    "ingestSchedulerGuid": {
      "type": "string",
      "defaultValue": "8dad6b81-0110-4776-a619-36b28e8a460e",
      "metadata": {
        "description": "GUID for the schedule creation - create a unique before deploy"
      }
    },
    "ingestCleanupGuid": {
      "type": "string",
      "defaultValue": "19e2310a-f1b3-4603-82e3-c51198b7a964",
      "metadata": {
        "description": "GUID for the solution cleanup - create a unique before deploy"
      }
    }
  },
  "variables": {
     "runbooks": {
      "ingestParentRunbook": {
        "name": "AzureSAIngestionParent-MS-Mgmt-SA",
        "version": "1.0.0.0",
        "description": "Runbook to automatically ingest Azure Storage Inventory data and events into OMS Log Analytics",
        "type": "PowerShell",
        "Id": ""
      },
      "ingestChildRunbook": {
        "name": "AzureSAIngestionChild-MS-Mgmt-SA",
        "version": "1.0.0.0",
        "description": "Runbook to automatically ingest Azure Storage Metrics into OMS Log Analytics",
        "type": "PowerShell",
        "Id": ""
      },
      "ingestMetricsEnablerRunbook": {
        "name": "AzureStorageMetricsEnabler-MS-Mgmt-SA",
        "version": "1.0.0.0",
        "description": "Runbook to enable Storage Analytics metrics",
        "type": "PowerShell",
        "Id": ""
      },
      "ingestSchedulerRunbook": {
        "name": "CreateSchedules-MS-Mgmt-SA",
        "version": "1.0.0.0",
        "description": "Runbook to automatically create required schedules for OMS Log Analytics ingestion",
        "type": "PowerShell",
        "Id": ""
      },
      "ingestCleanupRunbook": {
        "name": "CleanSolution-MS-Mgmt-SA",
        "version": "1.0.0.0",
        "description": "Runbook to clean up any artifacts from previous deoplyments.",
        "type": "PowerShell",
        "Id": ""
      }
    },
    "parentRunbookUri": "[concat(parameters('_artifactsLocation'),'/scripts/AzureSAIngestionParent-MS-Mgmt-SA.ps1', parameters('_artifactsLocationSasToken'))]",
    "childRunbookUri": "[concat(parameters('_artifactsLocation'),'/scripts/AzureSAIngestionChild-MS-Mgmt-SA.ps1', parameters('_artifactsLocationSasToken'))]",
    "metricsEnablerRunbookUri": "[concat(parameters('_artifactsLocation'),'/scripts/AzureStorageMetricsEnabler-MS-Mgmt-SA.ps1', parameters('_artifactsLocationSasToken'))]",
    "schedulerRunbookUri": "[concat(parameters('_artifactsLocation'),'/scripts/CreateSchedules-MS-Mgmt-SA.ps1', parameters('_artifactsLocationSasToken'))]",
    "cleanupRunbookUri": "[concat(parameters('_artifactsLocation'),'/scripts/CleanSolution-MS-Mgmt-SA.ps1', parameters('_artifactsLocationSasToken'))]",
    "azureSubscriptionId": "saAzureSubscriptionId",
    "omsSolutions": {
      "customSolution": {
        "name": "Azure Storage Analytics",
        "solutionName": "[concat('AzureStorageAnalytics', '[', parameters('omsLogAnalyticsWorkspaceName'), ']')]",
        "publisher": "volkanc@microsoft.com",
        "displayName": "Azure Storage Analytics (Preview)",
        "description": "Monitor and analyze Azure Storage Accounts",
        "author": "volkanc@microsoft.com"
      }
    },
    "opsInsightWorkspaceID": "AzureSAIngestion-OPSINSIGHTS_WS_ID-MS-Mgmt-SA",
    "opsInsightWorkspaceIDType": "string",
    "opsInsightWorkspaceIDDescription": "Value of the user's omsWorkspaceId",
    "opsInsightWorkspaceKey": "AzureSAIngestion-OPSINSIGHTS_WS_KEY-MS-Mgmt-SA",
    "opsInsightWorkspaceKeyType": "string",
    "opsInsightWorkspaceKeyDescription": "Encrypted value of the user's omsWorkspaceKey",
    "createScheduleAutomationAccountName": "AzureSAIngestion-AzureAutomationAccount-MS-Mgmt-SA",
    "createScheduleAutomationAccountType": "string",
    "createScheduleAutomationAccountDescription": "The name of the Automation Account",
    "createScheduleResourceGroupName": "AzureSAIngestion-AzureAutomationResourceGroup-MS-Mgmt-SA",
    "createScheduleResourceGroupType": "string",
    "createScheduleResourceGroupDescription": "The name of the resource group",
    "alertArray": [
      {
        "searchName": "Azure Storage Account IO Throttling Limit",
        "description": "Each standard storage account is capped to 20.000 IOPs . This alert is indicator that one of your storage accounts is at the risk of throttling and IO might be capped.",
        "severity": "Critical",
        "query": "Type=AzureStorage_CL   MetricName_s=Inventory  InventoryType_s=VHDIOPs StorageAccount_s in   {Type=AzureStorage_CL MetricName_s=Inventory InventoryType_s=StorageAccount Tier_s=Standard|measure count() by StorageAccount_s}| measure sum(MaxDiskIO_d) as TotalIO by StorageAccount_s  |where TotalIO > 20000 ",
        "alertTresholdValue": 0,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 1,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 15,
        "scheduleQueryTimeSpan": 15,
        "alertName": "Azure Storage Account IO Throttling Limits Reached"
      },
      {
        "searchName": "Azure Premium Storage Account NotinUse",
        "description": "Azure does not delete the vhd files associated with VMs when the VM is deleted. If the VM is suing premium storage  you will be chardged for that storage untill you  migarte the data and delete the storage account.",
        "severity": "Critical",
        "query": "Type=AzureStorage_CL  MetricName_s=Inventory InventoryType_s=VHDIOPs VHDUri_s=NullUri TimeGenerated>NOW-1HOUR |measure count() by StorageAccount_s",
        "alertTresholdValue": 0,
        "operator": "gt",
        "alertThrottleInMinutes": 240,
        "alertBreach": 1,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Premium Storage Account NotinUse"
      }
    ],
    "alertMetricArray": [
      {
        "searchName": "Azure Storage Quota Usage Critical",
        "description": "Each Azure Subscription can host certain number of storage accounts. This alert is an indicator  that  your Azure Subscription is approaching the storage account limits.",
        "severity": "Critical",
        "query": "Type=AzureStorage_CL  MetricName_s=StorageQuotas  |measure avg(Quotapct_d) by AzureSubscription_s,QuotaType_s interval 15MINUTES",
        "alertTresholdValue": 90,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 1,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage Account Quota Consumption is greater than 90%"
      },
      {
        "searchName": "Azure Storage Quota Usage Warning",
        "description": "Each Azure Subscription can host certain number of storage accounts. This alert is an indicator  that  your Azure Subscription is approacihing the storage account limits.",
        "severity": "Warning",
        "query": "Type=AzureStorage_CL  MetricName_s=StorageQuotas |measure avg(Quotapct_d) by AzureSubscription_s,QuotaType_s interval 15MINUTES",
        "alertTresholdValue": 80,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 1,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage Account Quota Consumption is greater than 80%"
      },
      {
        "searchName": "Azure Storage Availability Below 95pct",
        "description": "Any value less than 100% indicates that some storage requests are failing. Examine other ErrorPercentage information to see the reason for failures. This alert is an indicator  that  Availability for requests fall below %95.",
        "severity": "Critical",
        "query": "Type=AzureStorage_CL MetricName_s=MetricsTransactions | measure avg(Availability_d) by StorageAccount_s interval 15Minutes",
        "alertTresholdValue": 95,
        "operator": "lt",
        "alertThrottleInMinutes": 240,
        "alertBreach": 2,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage Availability Below 95pct"
      },
      {
        "searchName": "Azure Storage End2End Latency Too High",
        "description": "AverageE2ELatency is a measure of end-to-end latency that includes the time taken to read the request and send the response in addition to the time taken to process the request including network latency. This alert is an indicator  that  AvergaeE2ELAtency for storage account is above 100ms.",
        "severity": "Warning",
        "query": "Type=AzureStorage_CL MetricName_s=MetricsTransactions | measure avg(Availability_d) by StorageAccount_s interval 15Minutes",
        "alertTresholdValue": 100,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 2,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage End2End Latency Above 100ms"
      },
      {
        "searchName": "Azure Storage High PercentThrottlingError",
        "description": "Throttling errors occur when you exceed the scalability targets of a storage service. The storage service does this to ensure that no single client or tenant can use the service at the expense of others. This alert is an indicator  that  storage account has reached the throttling limits and some requests are failing.",
        "severity": "Critical",
        "query": "Type=AzureStorage_CL MetricName_s=MetricsTransactions | measure avg(PercentThrottlingError_d) by StorageAccount_s interval 15Minutes",
        "alertTresholdValue": 0,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 1,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage High PercentThrottlingError"
      },
      {
        "searchName": "Azure Storage High PercentTimeoutError",
        "description": "The PercentTimeoutError metric represents the timeout in storage requests and  is an aggregation of the following metrics: ClientTimeoutError, AnonymousClientTimeoutError, SASClientTimeoutError, ServerTimeoutError, AnonymousServerTimeoutError, and SASServerTimeoutError.This alert is an indicator  that  storage account has reached the throttling limits and some requests are failing.",
        "severity": "Warning",
        "query": "Type=AzureStorage_CL MetricName_s=MetricsTransactions | measure avg(PercentTimeoutError_d) by StorageAccount_s interval 15Minutes",
        "alertTresholdValue": 1,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 1,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage High PercentTimeoutError"
      },
      {
        "searchName": "Azure Storage High PercentNetworkError",
        "description": "The PercentNetworkError metric is an aggregation of the following metrics NetworkError, AnonymousNetworkError, and SASNetworkError. These occur when the storage service detects a network error when the client makes a storage request.This alert is an indicator  that  storage account is facing network related errors.",
        "severity": "Warning",
        "query": "Type=AzureStorage_CL MetricName_s=MetricsTransactions | measure avg(PercentNetworkError_d) by StorageAccount_s interval 15Minutes",
        "alertTresholdValue": 1,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 1,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage High PercentNetworkError"
      },
      {
        "searchName": "Azure Storage SASAuthorizationError",
        "description": "If the client application attempts to use a SAS key that does not include the necessary permissions for the operation, the storage service returns an HTTP 404 (Not found) message to the client. At the same time, you will also see a non-zero value for SASAuthorizationError in the metrics. This alert is an indicator  that  storage account is facing SAS Autorizations errors.",
        "severity": "Warning",
        "query": "Type=AzureStorage_CL MetricName_s=MetricsTransactions | measure avg(SASAuthorizationError_d) by StorageAccount_s interval 15Minutes",
        "alertTresholdValue": 1,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 2,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage SASAuthorizationError Detected"
      },
      {
        "searchName": "Azure Storage High PercentAuthorizationError",
        "description": "The percentage of requests that failed with an AuthorizationError. This alert is an indicator  that  storage account is facing authorization  errors.",
        "severity": "Warning",
        "query": "Type=AzureStorage_CL MetricName_s=MetricsTransactions | measure avg(PercentAuthorizationError_d) by StorageAccount_s interval 15Minutes",
        "alertTresholdValue": 1,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 2,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage High PercentAuthorizationError"
      },
      {
        "searchName": "Azure Storage PercentClientOtherError",
        "description": "Authenticated request that failed as expected. This error can represent many 300-400 level HTTP status codes and conditions such as NotFound and ResourceAlreadyExists. This alert is an indicator  that  more than 1% of the requests failed with such errors.",
        "severity": "Warning",
        "query": "Type=AzureStorage_CL MetricName_s=MetricsTransactions | measure avg(PercentClientOtherError_d) by StorageAccount_s interval 15Minutes",
        "alertTresholdValue": 1,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 2,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage High PercentClientOtherError"
      },
      {
        "searchName": "Azure Storage High PercentServerOtherError",
        "description": "Authenticated request that failed due to unknown server errors, most commonly returning an HTTP 500 status code. This alert is an indicator  that  more than 1% of the requests failed with such errors.",
        "severity": "Warning",
        "query": "Type=AzureStorage_CL MetricName_s=MetricsTransactions | measure avg(PercentServerOtherError_d) by StorageAccount_s interval 15Minutes",
        "alertTresholdValue": 1,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 2,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure Storage High PercentServerOtherError"
      },
      {
        "searchName": "Azure File Share Quota Usage Warning",
        "description": "Each Azure Subscription can host certain number of storage accounts. This alert is an indicator  that  your Azure Subscription is approacihing the storage account limits.",
        "severity": "Warning",
        "query": "Type=AzureStorage_CL  InventoryType_s=File | EXTEND product(div(ShareUsedGB_d,Quota_d),100)  as ShareUsage | measure avg(ShareUsage) by FileShare_s  interval 15MINUTES",
        "alertTresholdValue": 80,
        "operator": "gt",
        "alertThrottleInMinutes": 60,
        "alertBreach": 1,
        "searchCategory": "Azure Storage Analytics",
        "scheduleIntervalInMinutes": 60,
        "scheduleQueryTimeSpan": 60,
        "alertName": "Azure File Share Quota Usage is greater than 80%"
      }
    ]
  },
  "resources": [
    {
      "name": "[parameters('omsLogAnalyticsWorkspaceName')]",
      "type": "Microsoft.OperationalInsights/workspaces",
      "apiVersion": "2015-11-01-preview",
      "location": "[parameters('omsLogAnalyticsRegion')]",
      "properties": {
        "sku": {
          "name": "[parameters('omsLogAnalyticsSku')]"
        }
      },
      "resources": [
        {
          "apiVersion": "2015-11-01-preview",
          "name": "[variables('omsSolutions').customSolution.name]",
          "type": "views",
          "id": "[resourceId('Microsoft.OperationalInsights/workspaces/views/', parameters('omsLogAnalyticsWorkspaceName'), variables('omsSolutions').customSolution.name)]",
          "dependson": [
            "[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]"
          ],
          "properties": {
            "Name": "[variables('omsSolutions').customSolution.name]",
            "DisplayName": "[variables('omsSolutions').customSolution.displayName]",
            "Description": "[variables('omsSolutions').customSolution.description]",
            "Author": "[variables('omsSolutions').customSolution.author]",
            "Source": "Local",
            "Dashboard": [
              {
                "Id": "InformationBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "Title": "Azure  Storage Analytics (Preview)",
                    "NewGroup": false,
                    "Color": "#0072c6"
                  },
                  "Header": {
                    "Image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAztJREFUeNrUmktoE1EUhqexKj4zJWoaqIpVaVGxKr6ogsaNbhS0YKkKFeKmriwFEaXYnY+FYjeCbmtRRBeuXIlLMe1CXGlduBOt0rS1FaF2/A+ciWMy0yT3njvN/PBtMuHc8899zJ1zp8ZxHEtAKXAE7AdNYBOwGVKO+QQ+gDfgFfii23CNhoHV4CyzWzHGEBgEA2BUKQIZqJAG0A+mHTn9AvfB2krzqeTPi8AVMOWYE92UPrBY2kAzeOeEp/fcZsncYmWMsjaQBdut8LSN22zTnQMXwYwzf5rhHJSGUJdTPeoKyjNoGT0JnoIFCt1/GXwOuNYIbirE/APawbNyhlATmNS4W4fm6NW0Rlxa/baWmsQLwROwXGMC2orXSmkpeMw55lVooAe0aK4gcUMG3NWpJ8hAA+gVWAJtRXPlqpdzLTJwlbvJpAFbID7leK3QwCpwXughFDdsgNTJOecN0A9LhIKbHkIW59rpNdAhuA2wQ+gB0hnXQBLsiqCBnaCeDKTpxUYwcDwkA5TzYTLQKryTDGMOuDoQ44eDFcEhRNpCBtYJB42HaGC9O4klVRuwl1opPNdIa2KaG7dK7nSdgXZWxCwzskOYwPmtxISBuPEQxj9pnAx8NRC4LiQDo2RgJMI98DHGtUpppbgXvNSbMEAv9af5NTKKaicDtK/+ZmCNNi0qpyRpCH3nKnHUNOROYtIj4eDTXP9JMzfAlHAbg966UEKwXE71m70+NSH67bdgFTvhrQv9AA+E7sw98Nbnd/rtjlAbDznn/ypzKc2KnKuDc1TmWgXiT3KuRZU5Oq+6LrQ6BGlWIH6f5TlbK9zM9YNhzQaOKV4rR8M8RD23q7ibG0FOo4snwA6fuC18TVWU08Zyy+snwHNLrbxu8ZJ5F7zkIXUUdNP+XTEelddPgRfFAzZ4wmXAbBUcblAOF1QP+TJVcMSU0T2lPA7G5iH5HLctcsy6AWRDTD7LbYoedNeCS2DcYOK0SnVzW+In9S5JcEtzSfRL/DbHrigfnY896C2LPvQ4B/b4PBRLiZ7KdJg9wLvhMaUCqdDnNgkqtIJ9oBlspqITWMYvSj/5pWnE+ve5zev8hkxDfwUYAP0NkvYTPlJVAAAAAElFTkSuQmCC",
                    "Label": "Azure Storage Account Monitoring",
                    "Link": {
                      "Label": "More info ",
                      "Url": "https://github.com/Azure/azure-quickstart-templates/blob/master/oms-azure-storage-analytics-solution/README.md"
                    }
                  },
                  "List": [
                    {
                      "Title": "Solution Overview",
                      "Content": "\nAzure Storage Analytics Solution utilizes  native **Storage REST API** capabilities and **Storage Analytics**  to enable inventory and monitoring of storage accounts.\n\n![MS Logo](https://assets.onestore.ms/cdnfiles/onestorerolling-1607-15000/shell/v3/images/logo/microsoft.png \"Microsoft\")"
                    }
                  ]
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Storage Account Usage  for Subscription",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Storage Accounts by Deployment type",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL    MetricName_s=StorageQuotas TimeGenerated >NOW-60MINUTES |measure avg(SACurrent_d) by QuotaType_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#55d455",
                        "#ffb900"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL  MetricName_s=StorageQuotas TimeGenerated >NOW-60MINUTES |measure avg(Quotapct_d) by AzureSubscription_s,QuotaType_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Storage Account Quota",
                      "Value": "% Utilized"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": true,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "80",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Azure Storage Inventory",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Storage Inventory",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL    MetricName_s=Inventory AND NOT  InventoryType_s=VHDIOPs | measure countdistinct(Uri_s) by InventoryType_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": [
                        "StorageAccount"
                      ]
                    },
                    "Options": {
                      "colors": [
                        "#0072c6",
                        "#ffb900",
                        "#009e49"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL    MetricName_s=Inventory AND NOT  InventoryType_s=VHDIOPs | measure countdistinct(Uri_s) by InventoryType_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Inventory",
                      "Value": "Count"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Storage Account Capacity Usage",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Utilized (GB)",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL    MetricName_s=MetricsCapacity TimeGenerated>NOW-1HOUR |measure avg(Capacity_d) as UsedGB by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#fcd116",
                        "#0072c6",
                        "#55d455"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL    MetricName_s=MetricsCapacity TimeGenerated>NOW-1HOUR |measure avg(Capacity_d) as UsedGB by StorageAccount_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "STORAGE Account",
                      "Value": "UsedinGB"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": true,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "400000",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "450000",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "STORAGE ACCOUNT INVENTORY",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "SA by Tier",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL      MetricName_s=Inventory  InventoryType_s=StorageAccount  |measure countdistinct(StorageAccount_s) by Sku_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL      MetricName_s=Inventory  InventoryType_s=StorageAccount  |measure countdistinct(StorageAccount_s) by Location_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "SA by Location",
                      "Value": "Count"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "200",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "250",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "BLOB - Total Requests",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "TotalRequests per Storage Acc",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL    MetricName_s=MetricsTransactions StorageService_s=Blob  TimeGenerated>NOW-1HOUR |measure sum(TotalRequests_d) by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#0072c6",
                        "#55d455",
                        "#fcd116"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL    MetricName_s=MetricsTransactions     StorageService_s=Blob | measure sum(TotalRequests_d) by StorageAccount_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Storage Account",
                      "Value": "RequestCount"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "BLOB - E2E Latency (ms)",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Blob  |measure avg(AverageE2ELatency_d) by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Blob   |measure avg(AverageE2ELatency_d) by StorageAccount_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Storage Account",
                      "Value": "Latency"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": true,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "50",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "100",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "IAAS - Disks by SA",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "VHDs  Attached to VMs",
                    "Subtitle": "VHD Count"
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL      MetricName_s=Inventory  InventoryType_s=VHDIOPs   | measure countdistinct(VHDUri_s) by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL      MetricName_s=Inventory  InventoryType_s=VHDIOPs   | measure countdistinct(VHDUri_s) by StorageAccount_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "STORAGEACCOUNT",
                      "Value": "VHD COUNT"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": true,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "35",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "40",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "IAAS - IO PRESSURE FOR STORAGE ACCOUNTS",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "MAX Estimated IO ",
                    "Subtitle": "Limit 20.000 IOPS Per SA"
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=Inventory  InventoryType_s=VHDIOPs TimeGenerated>NOW-1HOUR StorageAccount_s in   {Type=AzureStorage_CL MetricName_s=Inventory InventoryType_s=StorageAccount Tier_s=Standard|measure count() by StorageAccount_s} | measure sum(MaxDiskIO_d) by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=Inventory  InventoryType_s=VHDIOPs TimeGenerated>NOW-1HOUR StorageAccount_s in   {Type=AzureStorage_CL MetricName_s=Inventory InventoryType_s=StorageAccount Tier_s=Standard|measure count() by StorageAccount_s}| measure sum(MaxDiskIO_d) by StorageAccount_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Storage Account",
                      "Value": "MaxPossibleIO"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": true,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "18000",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "19500",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartCalloutBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Storage Account Throttling Errors",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Throttling ErrorPct by Storage Service",
                    "Subtitle": ""
                  },
                  "LineChart": {
                    "Query": "Type=AzureStorage_CL     |measure avg(PercentThrottlingError_d) by StorageService_s",
                    "Callout": {
                      "Title": "Avg per hour",
                      "Series": "",
                      "Operation": "Average"
                    },
                    "yAxis": {
                      "isLogarithmic": false,
                      "units": {
                        "baseUnitType": "",
                        "baseUnit": "",
                        "displayUnit": ""
                      },
                      "customLabel": ""
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     |measure avg(PercentThrottlingError_d) by StorageAccount_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "STORAGEACCOUNT",
                      "Value": "Error %"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartCalloutStackedBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "BLOB STORAGE METRICS",
                    "newGroup": false
                  },
                  "charts": [
                    {
                      "Header": {
                        "Title": "Ingress Traffic KB Over Time",
                        "Subtitle": " Top 10 "
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Blob  StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Blob | measure sum(TotalIngress_d) by StorageAccount_s |top 10 } | EXTEND div(TotalIngress_d,1024)  as IngressKB | measure sum(IngressKB) by StorageAccount_s  interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "Count",
                            "baseUnit": "Ones",
                            "displayUnit": "AUTO"
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Egress Traffic KB Over Time",
                        "Subtitle": "TOP 10"
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Blob StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Blob | measure sum(TotalEgress_d) by StorageAccount_s |top 10 } | EXTEND div(TotalEgress_d,1024)  as EgressKB | measure sum(EgressKB)  by StorageAccount_s  interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Total Requests Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Blob StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Blob | measure sum(TotalRequests_d) by StorageAccount_s |top 10 }  |measure sum(TotalRequests_d) by StorageAccount_s  Interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    }
                  ]

                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "BLOB - Ingres Traffic",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Blob   | EXTEND div(TotalIngress_d,1024)  as IngressKB | measure sum(IngressKB)  by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Blob  | EXTEND div(TotalIngress_d,1024)  as IngressKB | measure sum(IngressKB) by StorageAccount_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "STORAGE ACCOUNT",
                      "Value": "Ingress Traffic"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "BLOB - Egress Traffic KB",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Blob  | EXTEND div(TotalEgress_d,1024)  as EgressKB | measure sum(EgressKB)  by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Blob  | EXTEND div(TotalEgress_d,1024)  as EgressKB | measure sum(EgressKB)  by StorageAccount_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "STORAGE ACCOUNT",
                      "Value": "Egress Traffic KB"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "BLOB - SA Request Errors",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "TotalErrorPct by Storage Account",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Blob   |EXTEND sum(PercentClientOtherError_d,PercentNetworkError_d,PercentTimeoutError_d,PercentThrottlingError_d,PercentAuthorizationError_d,PercentServerOtherError_d) AS TotalError |measure avg(TotalError) as AvgPctError  by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Percentage",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#e81123",
                        "#ff8c00",
                        "#ffb900"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Blob   |EXTEND sum(PercentClientOtherError_d,PercentNetworkError_d,PercentTimeoutError_d,PercentThrottlingError_d,PercentAuthorizationError_d,PercentServerOtherError_d) AS TotalError |measure avg(TotalError)as AvgPctError  by StorageAccount_s,StorageService_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "SA",
                      "Value": "Error %"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartCalloutStackedBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Request ErrorPct Distribution",
                    "newGroup": false
                  },
                  "charts": [
                    {
                      "Header": {
                        "Title": "Client Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Blob    |measure avg(PercentClientOtherError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Network Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Blob    |measure avg(PercentNetworkError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Authorization Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Blob   |measure avg(PercentAuthorizationError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    }
                  ]
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "TABLE - TOTAL REQUESTS ",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Total Request per Storage Account",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Table  TimeGenerated>NOW-1HOUR |measure sum(TotalRequests_d) by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Table  TimeGenerated>NOW-1HOUR |measure sum(TotalRequests_d) by StorageAccount_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Storage Account",
                      "Value": "RequestCount"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartCalloutStackedBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "TABLE STORAGE METRICS",
                    "newGroup": false
                  },
                  "charts": [
                    {
                      "Header": {
                        "Title": "Ingress Traffic KB Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Table StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Table | measure sum(TotalIngress_d) by StorageAccount_s |top 10 } | EXTEND div(TotalIngress_d,1024)  as IngressKB | measure sum(IngressKB) by StorageAccount_s  interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Egress Traffic KB Over time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Table StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Table | measure sum(TotalEgress_d) by StorageAccount_s |top 10 }   | EXTEND div(TotalEgress_d,1024)  as EgressKB | measure sum(EgressKB)  by StorageAccount_s  interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Total Requests Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Table  StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Table | measure sum(TotalRequests_d) by StorageAccount_s |top 10 }  |measure sum(TotalRequests_d) by StorageAccount_s  Interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    }
                  ]
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "TABLE - SA Request Errors",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "TotalErrorPct by Storage Account",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Table   |EXTEND sum(PercentClientOtherError_d,PercentNetworkError_d,PercentTimeoutError_d,PercentThrottlingError_d,PercentAuthorizationError_d,PercentServerOtherError_d) AS TotalError |measure avg(TotalError) as AvgPctError  by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Percentage",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#e81123",
                        "#ff8c00",
                        "#ffb900"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Table   |EXTEND sum(PercentClientOtherError_d,PercentNetworkError_d,PercentTimeoutError_d,PercentThrottlingError_d,PercentAuthorizationError_d,PercentServerOtherError_d) AS TotalError |measure avg(TotalError)as AvgPctError  by StorageAccount_s,StorageService_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "SA",
                      "Value": "Error %"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartCalloutStackedBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Request ErrorPct Distribution",
                    "newGroup": false
                  },
                  "charts": [
                    {
                      "Header": {
                        "Title": "Client Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Table    |measure avg(PercentClientOtherError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Network Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Table   |measure avg(PercentNetworkError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Authorization Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Table   |measure avg(PercentAuthorizationError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    }
                  ]
                }
              },
              {
                "Id": "LineChartCalloutStackedBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "QUEUE STORAGE METRICS",
                    "newGroup": false
                  },
                  "charts": [
                    {
                      "Header": {
                        "Title": "Ingress Traffic KB Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Queue StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Queue | measure sum(TotalIngress_d) by StorageAccount_s |top 10 }  | EXTEND div(TotalIngress_d,1024)  as IngressKB | measure sum(IngressKB) by StorageAccount_s  interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Egress Traffic KB Over time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Queue StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Queue | measure sum(TotalEgress_d) by StorageAccount_s |top 10 }  | EXTEND div(TotalEgress_d,1024)  as EgressKB | measure sum(EgressKB) by StorageAccount_s  interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Total Requests Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Queue StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=Queue | measure sum(TotalRequests_d) by StorageAccount_s |top 10 }   |measure sum(TotalRequests_d) by StorageAccount_s  Interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    }
                  ]
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "QUEUE - SA Request Errors",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "TotalErrorPct by Storage Account",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Queue   |EXTEND sum(PercentClientOtherError_d,PercentNetworkError_d,PercentTimeoutError_d,PercentThrottlingError_d,PercentAuthorizationError_d,PercentServerOtherError_d) AS TotalError |measure avg(TotalError) as AvgPctError  by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Percentage",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#e81123",
                        "#ff8c00",
                        "#ffb900"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Queue  |EXTEND sum(PercentClientOtherError_d,PercentNetworkError_d,PercentTimeoutError_d,PercentThrottlingError_d,PercentAuthorizationError_d,PercentServerOtherError_d) AS TotalError |measure avg(TotalError)as AvgPctError  by StorageAccount_s,StorageService_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "SA",
                      "Value": "Error %"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartCalloutStackedBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Request ErrorPct Distribution",
                    "newGroup": false
                  },
                  "charts": [
                    {
                      "Header": {
                        "Title": "Client Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Queue   |measure avg(PercentClientOtherError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Network Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Queue    |measure avg(PercentNetworkError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Authorization Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=Queue   |measure avg(PercentAuthorizationError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    }
                  ]
                }
              },
              {
                "Id": "LineChartCalloutStackedBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "FILE STORAGE METRICS",
                    "newGroup": false
                  },
                  "charts": [
                    {
                      "Header": {
                        "Title": "Ingress Traffic KB Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=File  StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=File| measure sum(TotalIngress_d) by StorageAccount_s |top 10 }  | EXTEND div(TotalIngress_d,1024)  as IngressKB | measure sum(IngressKB) by StorageAccount_s  interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Egress Traffic KB Over time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=File StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=File | measure sum(TotalEgress_d) by StorageAccount_s |top 10 }  | EXTEND div(TotalEgress_d,1024)  as EgressKB | measure sum(EgressKB)  by StorageAccount_s  interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Total Requests Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=File StorageAccount_s IN {Type=AzureStorage_CL     MetricName_s=MetricsTransactions  StorageService_s=File | measure sum(TotalRequests_d) by StorageAccount_s |top 10 }  |measure sum(TotalRequests_d) by StorageAccount_s  Interval 15Minutes",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    }
                  ]
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "FILE - SA Request Errors",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "TotalErrorPct by Storage Account",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=File   |EXTEND sum(PercentClientOtherError_d,PercentNetworkError_d,PercentTimeoutError_d,PercentThrottlingError_d,PercentAuthorizationError_d,PercentServerOtherError_d) AS TotalError |measure avg(TotalError) as AvgPctError  by StorageAccount_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Percentage",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#e81123",
                        "#ff8c00",
                        "#ffb900"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=File   |EXTEND sum(PercentClientOtherError_d,PercentNetworkError_d,PercentTimeoutError_d,PercentThrottlingError_d,PercentAuthorizationError_d,PercentServerOtherError_d) AS TotalError |measure avg(TotalError)as AvgPctError  by StorageAccount_s,StorageService_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "SA",
                      "Value": "Error %"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartCalloutStackedBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Request ErrorPct Distribution",
                    "newGroup": false
                  },
                  "charts": [
                    {
                      "Header": {
                        "Title": "Client Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=File    |measure avg(PercentClientOtherError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Network Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=File    |measure avg(PercentNetworkError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    },
                    {
                      "Header": {
                        "Title": "Authorization Error Pct Over Time",
                        "Subtitle": ""
                      },
                      "LineChart": {
                        "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions StorageService_s=File   |measure avg(PercentAuthorizationError_d) by StorageAccount_s",
                        "yAxis": {
                          "isLogarithmic": false,
                          "units": {
                            "baseUnitType": "",
                            "baseUnit": "",
                            "displayUnit": ""
                          },
                          "customLabel": ""
                        }
                      }
                    }
                  ]
                }
              }
            ],
            "OverviewTile": {
              "Id": "LineChartCalloutBuilderTile",
              "Type": "OverviewTile",
              "Version": 0,
              "Configuration": {
                "LineChart": {
                  "Query": "Type=AzureStorage_CL     MetricName_s=MetricsTransactions |measure sum(TotalRequests_d) by StorageAccount_s  Interval 15Minutes",
                  "Callout": {
                    "Title": "TOTAL REQUESTS",
                    "Series": "",
                    "Operation": "Sum"
                  },
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "Advanced": {
                  "DataFlowVerification": {
                    "Enabled": false,
                    "Query": "*",
                    "Message": ""
                  }
                }
              }
            }

          }
        }
      ]
    },
    {
      "apiVersion": "2015-10-31",
      "location": "[parameters('omsAutomationRegion')]",
      "name": "[parameters('omsAutomationAccountName')]",
      "type": "Microsoft.Automation/automationAccounts",
      "properties": {
        "sku": {
          "name": "Basic"
        }
      },
      "resources": [
        {
          "name": "[variables('azureSubscriptionId')]",
          "type": "variables",
          "apiVersion": "2015-10-31",
          "location": "[parameters('omsAutomationRegion')]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]"
          ],
          "tags": {},
          "properties": {
            "description": "Azure Subscription Id",
            "isEncrypted": 0,
            "type": "string",
            "value": "[concat('\"',subscription().subscriptionId,'\"')]"
          }
        },
        {
          "name": "[variables('opsInsightWorkspaceID')]",
          "type": "variables",
          "apiVersion": "2015-10-31",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]"
          ],
          "tags": {},
          "properties": {
            "description": "[variables('opsInsightWorkspaceIDDescription')]",
            "isEncrypted": 0,
            "type": "[variables('opsInsightWorkspaceIDType')]",
            "value": "[concat('\"',reference(resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName')), '2015-11-01-preview').customerId,'\"')]"
          }
        },
        {
          "name": "[variables('opsInsightWorkspaceKey') ]",
          "type": "variables",
          "apiVersion": "2015-10-31",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]"
          ],
          "tags": {},
          "properties": {
            "description": "[variables('opsInsightWorkspaceKeyDescription')]",
            "isEncrypted": 1,
            "type": "[variables('opsInsightWorkspaceKeyType')]",
            "value": "[concat('\"',listKeys(resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName')), '2015-11-01-preview').primarySharedKey,'\"')]"
          }
        },
        {
          "name": "[variables('createScheduleAutomationAccountName')]",
          "type": "variables",
          "apiVersion": "2015-10-31",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]"
          ],
          "tags": {},
          "properties": {
            "description": "[variables('createScheduleAutomationAccountDescription')]",
            "isEncrypted": 0,
            "type": "[variables('createScheduleAutomationAccountType')]",
            "value": "[concat('\"', parameters('omsAutomationAccountName'),'\"')]"
          }
        },
        {
          "name": "[variables('createScheduleResourceGroupName')]",
          "type": "variables",
          "apiVersion": "2015-10-31",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]"
          ],
          "tags": {},
          "properties": {
            "description": "[variables('createScheduleResourceGroupDescription')]",
            "isEncrypted": 0,
            "type": "[variables('createScheduleResourceGroupType')]",
            "value": "[concat('\"', resourceGroup().name, '\"')]"
          }
        },
        {
          "name": "[variables('runbooks').ingestParentRunbook.name]",
          "type": "runbooks",
          "apiVersion": "2015-10-31",
          "location": "[parameters('omsAutomationRegion')]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('azureSubscriptionId'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceID'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceKey'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/jobs/', parameters('ingestCleanupGuid'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "[variables('runbooks').ingestParentRunbook.type]",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbooks').ingestParentRunbook.description]",
            "publishContentLink": {
              "uri": "[variables('parentRunbookUri')]",
              "version": "[variables('runbooks').ingestParentRunbook.version]"
            }
          }
        },
        {
          "name": "[variables('runbooks').ingestChildRunbook.name]",
          "type": "runbooks",
          "apiVersion": "2015-10-31",
          "location": "[parameters('omsAutomationRegion')]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('azureSubscriptionId'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceID'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceKey'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/jobs/', parameters('ingestCleanupGuid'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "[variables('runbooks').ingestChildRunbook.type]",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbooks').ingestChildRunbook.description]",
            "publishContentLink": {
              "uri": "[variables('childRunbookUri')]",
              "version": "[variables('runbooks').ingestChildRunbook.version]"
            }
          }
        },
        {
          "name": "[variables('runbooks').ingestSchedulerRunbook.name]",
          "type": "runbooks",
          "apiVersion": "2015-10-31",
          "location": "[parameters('omsAutomationRegion')]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('azureSubscriptionId'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceID'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceKey'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/jobs/', parameters('ingestCleanupGuid'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "[variables('runbooks').ingestSchedulerRunbook.type]",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbooks').ingestSchedulerRunbook.description]",
            "publishContentLink": {
              "uri": "[variables('schedulerRunbookUri')]",
              "version": "[variables('runbooks').ingestSchedulerRunbook.version]"
            }
          }
        },
        {
          "name": "[variables('runbooks').ingestCleanupRunbook.name]",
          "type": "runbooks",
          "apiVersion": "2015-10-31",
          "location": "[parameters('omsAutomationRegion')]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('azureSubscriptionId'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceID'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceKey'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "[variables('runbooks').ingestCleanupRunbook.type]",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbooks').ingestCleanupRunbook.description]",
            "publishContentLink": {
              "uri": "[variables('cleanupRunbookUri')]",
              "version": "[variables('runbooks').ingestCleanupRunbook.version]"
            }
          }
        },
        {
          "name": "[variables('runbooks').ingestMetricsEnablerRunbook.name]",
          "type": "runbooks",
          "apiVersion": "2015-10-31",
          "location": "[parameters('omsAutomationRegion')]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('azureSubscriptionId'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceID'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/variables/', variables('opsInsightWorkspaceKey'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/jobs/', parameters('ingestCleanupGuid'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "[variables('runbooks').ingestMetricsEnablerRunbook.type]",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbooks').ingestMetricsEnablerRunbook.description]",
            "publishContentLink": {
              "uri": "[variables('metricsEnablerRunbookUri')]",
              "version": "[variables('runbooks').ingestMetricsEnablerRunbook.version]"
            }
          }
        },
        {
          "name": "[concat(parameters('omsAutomationAccountName'), '/', parameters('ingestCleanupGuid'))]",
          "type": "Microsoft.Automation/automationAccounts/jobs",
          "apiVersion": "2015-10-31",
          "location": "[parameters('omsAutomationRegion')]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/runbooks/', variables('runbooks').ingestCleanupRunbook.name)]"
          ],
          "tags": {},
          "properties": {
            "runbook": {
              "name": "[variables('runbooks').ingestCleanupRunbook.name]"
            },
            "parameters": {
              "targetSubscriptionId": "[subscription().subscriptionId]",
              "resourcegroup": "[resourceGroup().name]",
              "automationaccount": "[parameters('omsAutomationAccountName')]",
              "deleteList": "AzSAAnalytic"
            }
          }
        },
        {
          "name": "[concat(parameters('omsAutomationAccountName'), '/', parameters('ingestSchedulerGuid'))]",
          "type": "Microsoft.Automation/automationAccounts/jobs",
          "apiVersion": "2015-10-31",
          "location": "[parameters('omsAutomationRegion')]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/runbooks/', variables('runbooks').ingestSchedulerRunbook.name)]",
            "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'), '/jobs/', parameters('ingestCleanupGuid'))]"
          ],
          "tags": {},
          "properties": {
            "runbook": {
              "name": "[variables('runbooks').ingestSchedulerRunbook.name]"
            }
          }
        }
      ]
    },
    {
      "name": "[variables('omsSolutions').customSolution.solutionName]",
      "type": "Microsoft.OperationsManagement/solutions",
      "apiVersion": "2015-11-01-preview",
      "location": "[parameters('omsLogAnalyticsRegion')]",
      "dependsOn": [
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
        "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/views/', variables('omsSolutions').customSolution.name)]"
      ],
      "plan": {
        "name": "[variables('omsSolutions').customSolution.solutionName]",
        "product": "[variables('omsSolutions').customSolution.name]",
        "publisher": "[variables('omsSolutions').customSolution.publisher]",
        "promotionCode": ""
      },
      "properties": {
        "workspaceResourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
        "referencedResources": [],
        "containedResources": [
          "[resourceId('Microsoft.OperationalInsights/workspaces/views/', parameters('omsLogAnalyticsWorkspaceName'), variables('omsSolutions').customSolution.name)]"
        ]
      }
    },
    {
      "apiVersion": "2015-11-01-preview",
      "type": "Microsoft.OperationalInsights/workspaces/savedSearches",
      "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertArray')[copyIndex()].searchCategory), '|', toLower(variables('alertArray')[copyIndex()].searchName))]",
      "copy": {
        "name": "savedsearchcopy",
        "count": "[length(variables('alertArray'))]"
      },
      "dependsOn": [
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/views/', variables('omsSolutions').customSolution.name)]"
      ],
      "properties": {
        "etag": "*",
        "query": "[variables('alertArray')[copyIndex()].query]",
        "displayName": "[variables('alertArray')[copyIndex()].searchName]",
        "category": "[variables('alertArray')[copyIndex()].searchCategory]"
      }
    },
    {
      "apiVersion": "2015-11-01-preview",
      "type": "Microsoft.OperationalInsights/workspaces/savedSearches",
      "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName))]",
      "copy": {
        "name": "savedsearchcopy",
        "count": "[length(variables('alertMetricArray'))]"
      },
      "dependsOn": [
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/views/', variables('omsSolutions').customSolution.name)]"
      ],
      "properties": {
        "etag": "*",
        "query": "[variables('alertMetricArray')[copyIndex()].query]",
        "displayName": "[variables('alertMetricArray')[copyIndex()].searchName]",
        "category": "[variables('alertMetricArray')[copyIndex()].searchCategory]"
      }
    },
    {
      "apiVersion": "2015-11-01-preview",
      "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules",
      "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertArray')[copyIndex()].searchCategory), '|', toLower(variables('alertArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertArray')[copyIndex()].searchCategory, '|', variables('alertArray')[copyIndex()].searchName))]",
      "copy": {
        "name": "schedulescopy",
        "count": "[length(variables('alertArray'))]"
      },
      "dependsOn": [
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/views/', variables('omsSolutions').customSolution.name)]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/savedSearches/', tolower(variables('alertArray')[copyIndex()].searchCategory), '|', toLower(variables('alertArray')[copyIndex()].searchName))]"
      ],
      "properties": {
        "etag": "*",
        "Interval": "[variables('alertArray')[copyIndex()].scheduleIntervalInMinutes]",
        "QueryTimeSpan": "[variables('alertArray')[copyIndex()].scheduleQueryTimeSpan]",
        "enabled": true
      }
    },
    {
      "apiVersion": "2015-11-01-preview",
      "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules",
      "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName))]",
      "copy": {
        "name": "schedulescopy",
        "count": "[length(variables('alertMetricArray'))]"
      },
      "dependsOn": [
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/views/', variables('omsSolutions').customSolution.name)]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/savedSearches/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName))]"
      ],
      "properties": {
        "etag": "*",
        "Interval": "[variables('alertMetricArray')[copyIndex()].scheduleIntervalInMinutes]",
        "QueryTimeSpan": "[variables('alertMetricArray')[copyIndex()].scheduleQueryTimeSpan]",
        "enabled": true
      }
    },
    {
      "apiVersion": "2015-11-01-preview",
      "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
      "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertArray')[copyIndex()].searchCategory), '|', toLower(variables('alertArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertArray')[copyIndex()].searchCategory, '|', variables('alertArray')[copyIndex()].searchName), '/', 'alert-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertArray')[copyIndex()].searchCategory, '|', variables('alertArray')[copyIndex()].searchName))]",
      "copy": {
        "name": "actioncopy",
        "count": "[length(variables('alertArray'))]"
      },
      "dependsOn": [
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/views/', variables('omsSolutions').customSolution.name)]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/savedSearches/', tolower(variables('alertArray')[copyIndex()].searchCategory), '|', toLower(variables('alertArray')[copyIndex()].searchName))]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/savedSearches/', tolower(variables('alertArray')[copyIndex()].searchCategory), '|', toLower(variables('alertArray')[copyIndex()].searchName), '/schedules/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertArray')[copyIndex()].searchCategory, '|', variables('alertArray')[copyIndex()].searchName))]"
      ],
      "properties": {
        "etag": "*",
        "Type": "Alert",
        "Name": "[variables('alertArray')[copyIndex()].alertName]",
        "Description": "[variables('alertArray')[copyIndex()].description]",
        "Severity": "[variables('alertArray')[copyIndex()].severity]",
        "Throttling": {
          "DurationInMinutes": "[variables('alertArray')[copyIndex()].alertThrottleInMinutes]"
        },
        "Threshold": {
          "Operator": "[variables('alertArray')[copyIndex()].operator]",
          "Value": "[variables('alertArray')[copyIndex()].alertTresholdValue]"
        }
      }
    },
    {
      "apiVersion": "2015-11-01-preview",
      "type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
      "name": "[concat(parameters('omsLogAnalyticsWorkspaceName'), '/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName), '/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName), '/', 'alert-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName))]",
      "copy": {
        "name": "actioncopy",
        "count": "[length(variables('alertMetricArray'))]"
      },
      "dependsOn": [
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'))]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/views/', variables('omsSolutions').customSolution.name)]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/savedSearches/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName))]",
        "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsLogAnalyticsWorkspaceName'), '/savedSearches/', tolower(variables('alertMetricArray')[copyIndex()].searchCategory), '|', toLower(variables('alertMetricArray')[copyIndex()].searchName), '/schedules/','schedule-',uniqueString(resourceGroup().id, deployment().name,parameters('omsLogAnalyticsWorkspaceName'), '/', variables('alertMetricArray')[copyIndex()].searchCategory, '|', variables('alertMetricArray')[copyIndex()].searchName))]"
      ],
      "properties": {
        "etag": "*",
        "Type": "Alert",
        "Name": "[variables('alertMetricArray')[copyIndex()].alertName]",
        "Description": "[variables('alertMetricArray')[copyIndex()].description]",
        "Severity": "[variables('alertMetricArray')[copyIndex()].severity]",
        "Throttling": {
          "DurationInMinutes": "[variables('alertMetricArray')[copyIndex()].alertThrottleInMinutes]"
        },
        "Threshold": {
          "Operator": "[variables('alertMetricArray')[copyIndex()].operator]",
          "Value": "[variables('alertMetricArray')[copyIndex()].alertTresholdValue]",
          "MetricsTrigger": {
            "TriggerCondition": "Total",
            "Operator": "[variables('alertMetricArray')[copyIndex()].operator]",
            "Value": "[variables('alertMetricArray')[copyIndex()].alertBreach]"
          }
        }
      }
    }

  ],
  "outputs": {}
}